<%= form_with(model: report, data: {target: "report.form report.save", action: "ajax:success->report#success ajax:error->report#error"}) do |form| %>

  <div data-target="report.status" style="position:fixed; top: 0; left: 0; right: 0; z-index: 100000;">
  </div>

  <div class="form-group mt-4">
    <%= form.file_field :cover %>
  </div>

    <% form.fields_for :systems, systems do |system| %>
      <div class="form-group mt-4">
        <%= system.text_field :name, class: "form-control", placeholder: "System Name" %> 
      </div>
      <div class="form-group mt-4">
        <%= system.fields_for :components do |component| %>
           <%= component.text_field :name, class: "form-control", placeholder: "Component Name" %> 

            <%= component.fields_for :observations do |observation| %>
              <div class="form-group mt-4">
                <div class="row">
                  <div class="col">
                    <%= observation.text_field :name, class: "form-control", placeholder: "Observation Name" %>
                  </div>
                  <div class="col">
                    <%= observation.text_field :defect, class: "form-control", placeholder: "Observation Defect" %>
                  </div>
                </div>
              </div>
              <div class="form-group mt-4">
                <%= observation.text_field :description, class: "form-control", placeholder: "Observation Description" %>
              </div>
            <% end %>

            <%= component.fields_for :items do |item| %>
              <div class="form-group mt-4">
                <div class="row">
                  <div class="col">
                    <%= item.text_field :name, class: "form-control", placeholder: "Item Name" %>
                  </div>
                  <div class="col">
                    <%= item.text_field :defect, class: "form-control", placeholder: "Item Defect" %>
                  </div>
                </div>
              </div>
              <div class="form-group mt-4">
                <%= item.text_field :description, class: "form-control", placeholder: "Item Description" %>
              </div>
            <% end %>
        <% end %>
      </div>
    <% end %>

    <div class="row justify-content-between">
      <%= link_to "Back", "#", class: "btn btn-primary", data: {action: "click->report#back"} %>
      <%= link_to "Next", "#", class: "btn btn-primary", data: {action: "click->report#next"} %>
    </div>


  
<!--  
  <div class="actions">
    <%#= link_to "See Report", report_path(@report), class: "btn btn-primary" %>
  </div> -->
<% end %>