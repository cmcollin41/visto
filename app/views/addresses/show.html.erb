<div class="container mt-5" data-controller="signup">
	<div class="tab d-none" data-target="signup.tab">
		<div class="row justify-content-center">
			<div class="col-md-6">
				<h1 class="h5" style="letter-spacing: 0.1rem;">Home Inspection</h1>

				<p class="font-weight-light">
				  <%= image_tag("icons8-marker-black.svg", width: "16px", class: "mb-1") %> <%= @address.long_address %>
				</p>

				<%= image_tag("https://maps.googleapis.com/maps/api/streetview?size=400x400&location=#{@address.latitude},#{@address.longitude}&fov=90&pitch=0&key=AIzaSyARQ8k0F667JhDrekyvRKA_NhDrVei3rGI", width: "100%", class: "streetview") %>

			</div>
		</div>
		<div class="row justify-content-center mt-4">
			<div class="col-md-6">
				<div class="card" style="border: 1px dashed #212121">
	  			<div class="card-body">
	  				<div class="d-flex flex-row justify-content-between align-items-center">
	  					<span class="font-weight-light"><span class="font-weight-bold">$<%= cookies[:price] %></span> - General Home Inspection</span>
	  					<button type="button" id="nextBtn" class="btn btn-primary" data-signup-id="1" data-action="click->signup#next">Select Service</button>
	  				</div>
	  			</div>
		    </div>
	<!-- 	    <h6 class="mt-4" style="letter-spacing: 0.1rem;">Add-ons</h6>
		    <div style="width: 100%; border-bottom: 1px solid #212121;"></div>
		    <div class="d-flex flex-row justify-content-between align-items-center mt-3">
	  			<span>$99<span class="font-weight-light"> - Thermal Imaging</span></span>
	  					<%#= link_to "Add", "#", class: "btn btn-primary" %>
	  		</div>
	  		<div class="d-flex flex-row justify-content-between align-items-center mt-3">
	  			<span>$99<span class="font-weight-light"> - Radon Gas Test</span></span>
	  					<%#= link_to "Add", "#", class: "btn btn-primary" %>
	  		</div>
	  		<div class="d-flex flex-row justify-content-between align-items-center mt-3">
	  			<span>$99<span class="font-weight-light"> - Methamphetamine Sampling</span></span>
	  					<%#= link_to "Add", "#", class: "btn btn-primary" %>
	  		</div> -->
			</div>
		</div>
		<div class="my-5">
		  <div class="row justify-content-center">
		    <div class="col-md-6">
		      <div class="row justify-content-center">
		        <div class="col-md-4 mt-3">
		          <p class="font-weight-light"><%= image_tag("icons8-nailer.svg", width: "24px", class: "mb-2") %> <%= @yearbuilt %></p>
		        </div>
		        <div class="col-md-4 mt-3 text-md-center">
		          <p class="font-weight-light"><%= image_tag("icons8-house.svg", width: "24px", class: "mb-2") %> <%= @hometype %></p>
		        </div>
		        <div class="col-md-4 mt-3 text-md-right">
		        	<p class="font-weight-light"><%= image_tag("icons8-measure.svg", width: "24px", class: "mb-2") %> <%= @acres %> acres</p>
		        </div>
		        <div class="col-md-4 mt-3">
		        	<p class="font-weight-light"><%= image_tag("icons8-surface.svg", width: "24px", class: "mb-2") %> <%= @sqft %> sqft</p>
		        </div>
		        <div class="col-md-4 mt-3 text-md-center">
		        	<p class="font-weight-light"><%= image_tag("icons8-bedroom.svg", width: "24px", class: "mb-2") %> <%= @bedrooms %> bedrooms</p>
		        </div>
		        <div class="col-md-4 mt-3 text-md-right">
		        	<p class="font-weight-light"><%= image_tag("icons8-toilet-paper.svg", width: "24px", class: "mb-2") %> <%= @bathrooms %> bathrooms</p>
		        </div>
		        <div class="col-md-12 text-md-center">
		          <img src="http://www.zillow.com/widgets/GetVersionedResource.htm?path=/static/logos/Zillowlogo_200x50.gif" width="100" height="25" alt="Zillow Real Estate Search" id="yui_3_18_1_1_1535557505302_331">
		        </div>
		      </div>
		    </div>
			</div>
		</div>
	</div>
	<% unless customer_signed_in? %>
		<div class="tab d-none my-5" data-target="signup.tab">
			<div class="row justify-content-center">
				<div class="col-md-6">
					<%= form_for(:customer, url: registration_path(:customer), data: {target: "signup.form signup.save", action: "ajax:success->signup#success ajax:error->signup#error"}) do |f| %>

	          <div class="form-group">
	            <div class="form-row">
	              <div class="col">
	                <%= f.label :first_name %><br />
	                <%= f.text_field :first_name, autofocus: true, placeholder: "First Name", class: "form-control", id: "first" %>
	              </div>
	              <div class="col">
	                <%= f.label :last_name %><br />
	                <%= f.text_field :last_name, autofocus: true, placeholder: "Last Name", class: "form-control", id: "last" %>
	              </div>
	            </div>
	          </div>

	          <div class="form-group">
	            <%= f.label :email %><br />
	            <%= f.email_field :email, autofocus: true, placeholder: "Email", class: "form-control", id: "email" %>
	          </div>

	          <div class="form-group">
	            <%= f.label :mobile %><br />
	            <%= f.phone_field :mobile, autofocus: true, placeholder: "Mobile", class: "form-control", id: "mobile" %>
	          </div>

	          <div class="form-group">
	            <%= f.label :password %>
	            <%= f.password_field :password, placeholder: "Password", class: "form-control", id: "password" %>
	          </div>

	          <div class="actions float-right">
	            <%= f.submit "Submit & Schedule", class: "btn btn-primary", data: {action: "click->signup#submit click->signup#next", "signup-id": "2"} %>
	          </div>
	        <% end %>
				</div>.
			</div>
		</div>
	<% end %>
	<div class="tab d-none my-5" data-target="signup.tab">
		<div class="container">
			<div class="row justify-content-center">
				<div class="col-md-6">
					<h6>Schedule me</h6>
					<button type="button" id="nextBtn" class="btn btn-primary" data-signup-id="3" data-action="click->signup#next">Select Service</button>
				</div>
			</div>
		</div>
	</div>
	<div class="tab d-none my-5" data-target="signup.tab">
		<div class="container">
			<div class="row justify-content-center">
				<div class="col-md-6">
					<script src="https://js.stripe.com/v3/"></script>
						<form action="/payments-customer" method="post" id="payment-form">
						  <div class="form-row">
						    <label for="card-element">
						      Credit or debit card
						    </label>
						    <div id="card-element">
						      <!-- A Stripe Element will be inserted here. -->
						    </div>

						    <!-- Used to display form errors. -->
						    <div id="card-errors" role="alert"></div>
						  </div>

						  <button class="btn btn-primary">Submit Payment</button>
						</form>
				</div>
			</div>
		</div>
	</div>

	<div class="row justify-content-start">
		<div class="col-md-6">
			<div class="d-flex justify-content-between">
			  <button type="button" id="prevBtn" onclick="nextPrev(-1)">Previous</button>
			</div>
		</div>
	</div>

	<!-- Circles which indicates the steps of the form: -->
	<div style="text-align:center;margin-top:40px;">
	  <span class="step"></span>
	  <span class="step"></span>
	  <span class="step"></span>
	  <span class="step"></span>
	</div>
</div>



<script>
// Create a Stripe client.
var stripe = Stripe('pk_test_ltPOCimv4wKbqhNi3yJeuS2U');

// Create an instance of Elements.
var elements = stripe.elements();

// Custom styling can be passed to options when creating an Element.
// (Note that this demo uses a wider set of styles than the guide below.)
var style = {
  base: {
    color: '#32325d',
    fontFamily: '"Helvetica Neue", Helvetica, sans-serif',
    fontSmoothing: 'antialiased',
    fontSize: '16px',
    '::placeholder': {
      color: '#aab7c4'
    }
  },
  invalid: {
    color: '#fa755a',
    iconColor: '#fa755a'
  }
};

// Create an instance of the card Element.
var card = elements.create('card', {style: style});

// Add an instance of the card Element into the `card-element` <div>.
card.mount('#card-element');

// Handle real-time validation errors from the card Element.
card.addEventListener('change', function(event) {
  var displayError = document.getElementById('card-errors');
  if (event.error) {
    displayError.textContent = event.error.message;
  } else {
    displayError.textContent = '';
  }
});

// Handle form submission.
var form = document.getElementById('payment-form');
form.addEventListener('submit', function(event) {
  event.preventDefault();

  stripe.createToken(card).then(function(result) {
    if (result.error) {
      // Inform the user if there was an error.
      var errorElement = document.getElementById('card-errors');
      errorElement.textContent = result.error.message;
    } else {
      // Send the token to your server.
      stripeTokenHandler(result.token);
    }
  });
});

// Submit the form with the token ID.
function stripeTokenHandler(token) {
  // Insert the token ID into the form so it gets submitted to the server
  var form = document.getElementById('payment-form');
  var hiddenInput = document.createElement('input');
  hiddenInput.setAttribute('type', 'hidden');
  hiddenInput.setAttribute('name', 'stripeToken');
  hiddenInput.setAttribute('value', token.id);
  form.appendChild(hiddenInput);

  // Submit the form
  form.submit();
}

</script>